class MonoSub extends Cipher {
    private int key;
    
    method encrypt(plaintext) {
        alphabet <- "abcdefghijklmnopqrstuvwxyz"
        letter <- ""
        plaintext <- convertToLowercase(plaintext)
        
        for i <- 0 to lengthOf(plaintext) {
            character <- getCharacterAtIndex(plaintext, i)
            encryptedCharacter <- moveLetter(character, key, alphabet, true)
            letter <- concatenate(letter, encryptedCharacter)
        }
        
        return letter
    }
    
    method decrypt(ciphertext, key) {
        alphabet <- "abcdefghijklmnopqrstuvwxyz"
        plaintext <- ""
        
        for i <- 0 to lengthOf(ciphertext) {
            letter <- getCharacterAtIndex(ciphertext, i)
            decryptedCharacter <- moveLetter(letter, key, alphabet, false)
            plaintext <- concatenate(plaintext, decryptedCharacter)
        }
        
        return plaintext
    }
    
    method moveLetter(letter, key, alphabet, check) {
        if check is true {
            if letter is whitespace
                return whitespace
            index <- findIndexInAlphabet(letter, alphabet)
            newIndex <- (index + key)
            
            if newIndex > 26 {
                newIndex <- newIndex - 26
            }
            
            return getCharacterAtIndex(alphabet, newIndex)
        } else {
            if letter is whitespace
                return whitespace
            index <- findIndexInAlphabet(letter, alphabet)
            newIndex <- (index - key)
            
            if newIndex < 0 {
                newIndex <- newIndex + 26
            }
            
            return getCharacterAtIndex(alphabet, newIndex)
        }
    }
    
    method findIndexInAlphabet(letter, alphabet) {
        for i <- 0 to lengthOf(alphabet) {
            if letter is equal to getCharacterAtIndex(alphabet, i) {
                return i
            }
        }
        
        return -1
    }
    
    method convertToLowercase(text) {
        convertedText <- ""
        
        for i <- 0 to lengthOf(text) {
            character <- getCharacterAtIndex(text, i)
            
            if isUppercase(character) {
                character <- convertToLowerCase(character)
            }
            
            convertedText <- concatenate(convertedText, character)
        }
        
        return convertedText
    }
    
    method getCharacterAtIndex(text, index) {
        return character at index in text
    }
    
    method concatenate(string1, string2) {
        return concatenation of string1 and string2
    }
    
    method isUppercase(character) {
        return true if character is an uppercase letter, false otherwise
    }
    
    method convertToLowerCase(character) {
        return lowercase version of character
    }
}
