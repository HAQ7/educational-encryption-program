class MonoSub extends Cipher {
    private int key;
    
    method encrypt(plaintext) {
        alphabet <- "abcdefghijklmnopqrstuvwxyz"
        letter <- ""
        plaintext <- convertToLowercase(plaintext)
        
        for i <- 0 to lengthOf(plaintext) {
            character <- getCharacterAtIndex(plaintext, i)
            encryptedCharacter <- moveLetter(character, key, alphabet, true)
            letter <- concatenate(letter, encryptedCharacter)
        }
        
        return letter
    }
    
    method decrypt(ciphertext, key) {
        alphabet <- "abcdefghijklmnopqrstuvwxyz"
        plaintext <- ""
        
        for i <- 0 to lengthOf(ciphertext) {
            letter <- getCharacterAtIndex(ciphertext, i)
            decryptedCharacter <- moveLetter(letter, key, alphabet, false)
            plaintext <- concatenate(plaintext, decryptedCharacter)
        }
        
        return plaintext
    }
    
    method moveLetter(letter, key, alphabet, check) {
        if check is true {
            if letter is whitespace
                return whitespace
            index <- find(letter, alphabet)
            newIndex <- (index + key)
            
            if newIndex > 26 {
                newIndex <- newIndex - 26
            }
            
            return getCharacterAtIndex(alphabet, newIndex)
        } else {
            if letter is whitespace
                return whitespace
            index <- find(letter, alphabet)
            newIndex <- (index - key)
            
            if newIndex < 0 {
                newIndex <- newIndex + lengthOf(alphabet)
            }
            
            return getCharacterAtIndex(alphabet, newIndex)
        }
    }
}
